<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家庭時光膠囊 - 互動原型</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel to transpile JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .mobile-screen {
            width: 100%;
            max-width: 414px;
            height: 800px;
            border: 8px solid #1a202c;
            border-radius: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            position: relative;
            background-color: #f8fafc;
        }
        .page-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            background-color: inherit;
        }
        .page.is-active {
           opacity: 1;
           pointer-events: auto;
        }
        #share-modal-container, #add-member-modal-container {
            visibility: hidden; opacity: 0;
            transition: visibility 0s 0.3s, opacity 0.3s linear;
        }
        #share-modal-container.visible, #add-member-modal-container.visible {
            visibility: visible; opacity: 1;
            transition: opacity 0.3s linear;
        }
        #share-modal-panel, #add-member-modal-panel {
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        #share-modal-container.visible #share-modal-panel,
        #add-member-modal-container.visible #add-member-modal-panel {
            transform: translateY(0);
        }
        .photo-carousel::-webkit-scrollbar, .tag-carousel::-webkit-scrollbar, .featured-carousel::-webkit-scrollbar { display: none; }
        .masonry {
            column-count: 2;
            column-gap: 1rem;
        }
        .masonry-item {
            display: inline-block;
            width: 100%;
            margin-bottom: 1rem;
            break-inside: avoid;
        }
        .bottom-nav-item.active svg,
        .bottom-nav-item.active p {
            color: #f59e0b; /* amber-500 */
        }
        .like-button .heart-icon-outline { display: inline-block; }
        .like-button .heart-icon-solid { display: none; }
        .like-button.liked .heart-icon-outline { display: none; }
        .like-button.liked .heart-icon-solid { display: inline-block; color: #ef4444; } /* red-500 */
        .explore-tab.active {
            border-bottom-color: #f59e0b;
            color: #0f172a;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="mobile-screen">
        <div class="page-container">

            <!-- ================================================== -->
            <!-- =====            主畫面 (Home)                 ===== -->
            <!-- ================================================== -->
            <div id="home-screen" class="page is-active">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200 flex-shrink-0">
                    <div class="flex justify-between items-center">
                        <div><h1 class="text-xl font-bold text-gray-800">下午好，林媽媽！</h1></div>
                        <div class="flex items-center space-x-4">
                            <button id="settings-button" class="text-gray-500 hover:text-gray-800"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg></button>
                        </div>
                    </div>
                </header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-4 space-y-6 pb-24">
                        <div class="bg-amber-100 border-l-4 border-amber-400 p-4 rounded-lg shadow-sm cursor-pointer hover:shadow-md transition-shadow"><div class="flex items-center"><span class="text-2xl mr-3">✨</span><div><p class="font-semibold text-amber-800">一年前的今天...</p><p class="text-sm text-amber-700">你們正在沖繩享受陽光與沙灘！點此重溫 &gt;</p></div></div></div>
                        <h2 class="text-lg font-bold text-gray-700">本週</h2>
                        <div class="memory-card bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300"><img src="https://placehold.co/600x400/34D399/FFFFFF?text=親子時光" alt="陽明山繡球花之旅的封面照片" class="w-full h-40 object-cover"><div class="p-4 relative"><h2 class="text-lg font-bold text-gray-800">陽明山繡球花之旅</h2><p class="text-sm text-gray-500 mt-1">📍 台北市，陽明山</p><p class="text-xs text-gray-400 mt-2">2025年8月4日</p><div class="absolute bottom-2 right-2 text-gray-400" title="已分享給群組">👨‍👩‍👧‍👦</div></div></div>
                        <h2 class="text-lg font-bold text-gray-700 pt-4">2025年 7月</h2>
                        <div class="memory-card bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300"><img src="https://placehold.co/600x400/FBBF24/FFFFFF?text=生日快樂" alt="寶寶兩歲生日派對的封面照片" class="w-full h-40 object-cover"><div class="p-4 relative"><h2 class="text-lg font-bold text-gray-800">寶寶的兩歲生日派對</h2><p class="text-sm text-gray-500 mt-1">📍 我們溫暖的家</p><p class="text-xs text-gray-400 mt-2">2025年7月20日</p><div class="absolute bottom-2 right-2 text-gray-400" title="僅限自己">🔒</div></div></div>
                        <div class="memory-card bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300"><img src="https://placehold.co/600x400/60A5FA/FFFFFF?text=夏日戲水" alt="宜蘭童玩節的封面照片" class="w-full h-40 object-cover"><div class="p-4 relative"><h2 class="text-lg font-bold text-gray-800">宜蘭童玩節初體驗</h2><p class="text-sm text-gray-500 mt-1">📍 宜蘭縣，冬山河親水公園</p><p class="text-xs text-gray-400 mt-2">2025年7月5日</p><div class="absolute bottom-2 right-2 text-gray-400" title="公開">🌐</div></div></div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====         社群探索頁 (Explore)             ===== -->
            <!-- ================================================== -->
            <div id="explore-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200 flex-shrink-0">
                    <div class="relative">
                        <input type="text" placeholder="搜尋日記、創作者或地點..." class="w-full bg-gray-100 border border-gray-200 rounded-full py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-amber-400">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg></div>
                    </div>
                </header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-4 pb-24">
                        <div class="mb-6">
                             <h2 class="text-base font-bold text-gray-700 mb-3">熱門標籤</h2>
                             <div class="tag-carousel flex space-x-3 overflow-x-auto pb-2">
                                <button class="px-4 py-1 bg-amber-100 text-amber-800 rounded-full text-sm font-semibold flex-shrink-0">#親子景點</button>
                                <button class="px-4 py-1 bg-gray-200 text-gray-700 rounded-full text-sm font-semibold flex-shrink-0">#戶外露營</button>
                                <button class="px-4 py-1 bg-gray-200 text-gray-700 rounded-full text-sm font-semibold flex-shrink-0">#美食之旅</button>
                                <button class="px-4 py-1 bg-gray-200 text-gray-700 rounded-full text-sm font-semibold flex-shrink-0">#咖啡廳</button>
                                <button class="px-4 py-1 bg-gray-200 text-gray-700 rounded-full text-sm font-semibold flex-shrink-0">#海邊走走</button>
                             </div>
                        </div>
                        <h2 class="text-base font-bold text-gray-700 mb-3">熱門創作者</h2><div class="flex space-x-4 overflow-x-auto pb-3">
                            <div class="creator-card text-center flex-shrink-0 cursor-pointer"><img class="w-16 h-16 rounded-full border-2 border-amber-400 p-1" src="https://placehold.co/100x100/fde68a/a16207?text=媽" alt="Creator 1"><p class="text-xs mt-1">旅行的媽咪</p></div>
                            <div class="creator-card text-center flex-shrink-0 cursor-pointer"><img class="w-16 h-16 rounded-full border-2 border-gray-200 p-1" src="https://placehold.co/100x100/dbeafe/1e3a8a?text=爸" alt="Creator 2"><p class="text-xs mt-1">攝影老爸</p></div>
                        </div><h2 class="text-base font-bold text-gray-700 mt-6 mb-3">精選日記</h2><div class="masonry">
                        <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x500/fb923c/ffffff?text=露營" alt="Diary 1"><div class="p-3"><p class="text-sm font-semibold truncate">我們的第一次森林露營</p><p class="text-xs text-gray-500">by 旅行的媽咪</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 8.2k</span><span class="flex items-center">❤️ 1.2k</span></div></div></div></div>
                        <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x300/f87171/ffffff?text=野餐" alt="Diary 2"><div class="p-3"><p class="text-sm font-semibold truncate">城市公園的午後野餐</p><p class="text-xs text-gray-500">by 攝影老爸</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 6.5k</span><span class="flex items-center">❤️ 980</span></div></div></div></div>
                        <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x400/a78bfa/ffffff?text=古蹟" alt="Diary 3"><div class="p-3"><p class="text-sm font-semibold truncate">台南古蹟散步</p><p class="text-xs text-gray-500">by 娃娃看天下</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 4.1k</span><span class="flex items-center">❤️ 760</span></div></div></div></div>
                        <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x600/4ade80/ffffff?text=農場" alt="Diary 4"><div class="p-3"><p class="text-sm font-semibold truncate">清境農場餵羊初體驗</p><p class="text-xs text-gray-500">by 寶寶去哪兒</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 9.8k</span><span class="flex items-center">❤️ 2.3k</span></div></div></div></div>
                    </div></main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====       創作者個人主頁 (Profile)           ===== -->
            <!-- ================================================== -->
            <div id="profile-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200 flex items-center flex-shrink-0">
                    <button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                    <h1 class="text-base font-bold text-gray-800 mx-auto">旅行的媽咪</h1>
                    <div class="w-6"></div> <!-- Placeholder for alignment -->
                </header>
                <div class="overflow-y-auto flex-1">
                    <main class="pb-24">
                        <div class="p-4 text-center bg-white">
                            <img class="w-24 h-24 rounded-full border-4 border-white shadow-lg mx-auto -mt-16" src="https://placehold.co/100x100/fde68a/a16207?text=媽" alt="Creator 1">
                            <h2 class="text-xl font-bold mt-4">旅行的媽咪</h2>
                            <p class="text-sm text-gray-500 mt-1">@travelmom_tw</p>
                            <p class="text-sm text-gray-700 mt-4 max-w-md mx-auto">帶著兩個孩子探索台灣的美好角落。<br>熱愛露營、手作與咖啡廳。</p>
                            <div class="flex justify-center space-x-6 mt-4">
                                <div class="text-center">
                                    <p class="font-bold text-lg">128</p>
                                    <p class="text-xs text-gray-500">日記</p>
                                </div>
                                <div class="text-center">
                                    <p class="font-bold text-lg">15.2k</p>
                                    <p class="text-xs text-gray-500">粉絲</p>
                                </div>
                                <div class="text-center">
                                    <p class="font-bold text-lg">180</p>
                                    <p class="text-xs text-gray-500">追蹤中</p>
                                </div>
                            </div>
                            <button class="mt-6 w-full bg-amber-500 text-white font-bold py-2 rounded-lg">追蹤</button>
                        </div>
                        <div class="p-4">
                            <div class="masonry">
                                <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x500/fb923c/ffffff?text=露營" alt="Diary 1"><div class="p-3"><p class="text-sm font-semibold truncate">我們的第一次森林露營</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 8.2k</span><span class="flex items-center">❤️ 1.2k</span></div></div></div></div>
                                <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x600/4ade80/ffffff?text=農場" alt="Diary 4"><div class="p-3"><p class="text-sm font-semibold truncate">清境農場餵羊初體驗</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 9.8k</span><span class="flex items-center">❤️ 2.3k</span></div></div></div></div>
                                <div class="masonry-item"><div class="bg-white rounded-lg shadow-md overflow-hidden cursor-pointer"><img src="https://placehold.co/400x400/a78bfa/ffffff?text=古蹟" alt="Diary 3"><div class="p-3"><p class="text-sm font-semibold truncate">台南古蹟散步</p><div class="flex items-center text-xs text-gray-400 mt-2"><span class="mr-3 flex items-center">👁️ 4.1k</span><span class="flex items-center">❤️ 760</span></div></div></div></div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====        建立新日記頁 (Create)             ===== -->
            <!-- ================================================== -->
            <div id="create-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex justify-between items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900">取消</button><h1 class="text-base font-bold text-gray-800">建立新的回憶</h1></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-5"><h2 class="text-lg font-semibold text-gray-700 mb-3">
                            <span id="photo-count">已選取的照片 (0)</span>
                        </h2>
                        <div id="photo-carousel-container" class="photo-carousel flex space-x-3 overflow-x-auto pb-3">
                            <label for="photo-upload" class="w-full h-40 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer">
                                <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                                <span class="mt-2 text-sm text-gray-500">點擊此處上傳照片</span>
                            </label>
                        </div>
                        <input type="file" id="photo-upload" multiple accept="image/*" class="hidden">
                        <div class="mt-6"><label for="diary-title" class="text-lg font-semibold text-gray-700">日記標題</label><input type="text" id="diary-title" placeholder="為這份回憶取個名字吧！" class="w-full mt-2 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-400 focus:border-amber-400"></div>
                    <div class="mt-6">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">誰可以看見？</h3>
                        <select id="privacy-select" class="w-full p-3 border border-gray-300 rounded-lg bg-white">
                            <option value="private">🔒 僅限自己</option>
                            <option value="group">👨‍👩‍👧‍👦 特定群組</option>
                            <option value="public">🌐 公開到社群</option>
                        </select>
                    </div>
                     <div class="mt-6">
                        <h3 class="text-lg font-semibold text-gray-700 mb-2">AI 寫作風格</h3>
                        <div class="space-y-2">
                            <label class="flex items-start p-3 bg-white border-2 border-amber-400 rounded-lg"><input type="radio" name="writing-style" value="warm" class="mt-1 text-amber-500 focus:ring-amber-400" checked><div class="ml-3"><p class="font-semibold">溫馨感性風</p></div></label>
                            <label class="flex items-start p-3 bg-white border rounded-lg"><input type="radio" name="writing-style" value="fun" class="mt-1 text-amber-500 focus:ring-amber-400"><div class="ml-3"><p class="font-semibold">活潑有趣風</p></div></label>
                            <label class="flex items-start p-3 bg-white border rounded-lg"><input type="radio" name="writing-style" value="simple" class="mt-1 text-amber-500 focus:ring-amber-400"><div class="ml-3"><p class="font-semibold">簡潔紀錄風</p></div></label>
                            <div class="p-3 bg-white border rounded-lg">
                                <label class="flex items-start"><input type="radio" name="writing-style" value="custom" class="mt-1 text-amber-500 focus:ring-amber-400"><div class="ml-3 flex-1"><p class="font-semibold">✍️ 自訂風格</p><textarea id="custom-prompt" class="w-full mt-2 p-2 border rounded text-sm bg-gray-50" rows="3" placeholder="請輸入您希望的寫作風格提示詞，例如：請用古龍的武俠小說風格來寫..." disabled></textarea></div></label>
                            </div>
                        </div>
                    </div>
                    </main>
                </div>
                <footer class="p-5 bg-white/80 backdrop-blur-sm border-t border-gray-200 flex-shrink-0"><button id="generate-button" class="w-full bg-amber-500 text-white font-bold py-3 rounded-lg shadow-lg hover:bg-amber-600 transition-all disabled:bg-gray-300 disabled:shadow-none" disabled>下一步</button></footer>
            </div>

            <!-- ================================================== -->
            <!-- =====          日記詳情頁 (Detail)             ===== -->
            <!-- ================================================== -->
            <div id="detail-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm sticky top-0 z-20 flex justify-between items-center border-b border-gray-200 flex-shrink-0">
                    <button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button>
                    <h1 id="detail-title" class="text-base font-bold text-gray-800 truncate px-2">陽明山繡球花之旅</h1>
                    <div class="flex items-center space-x-4">
                        <button id="share-button" class="text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" /></svg></button>
                        <button id="edit-button" class="text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z" /></svg></button>
                    </div>
                </header>
                <div class="overflow-y-auto flex-1">
                    <main><div class="relative"><img src="https://placehold.co/600x450/6EE7B7/1F2937?text=花海中的笑聲" alt="陽明山繡球花海封面" class="w-full h-64 object-cover"><div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/60 to-transparent"><p id="detail-intro-text" class="text-white text-lg leading-relaxed">2025年的夏天，我們在陽明山的繡球花海中，捕捉了滿滿的笑聲與色彩。</p></div></div><div class="p-5 space-y-8"><div class="flex items-center space-x-4"><div class="w-2/5"><p id="detail-body-text" class="text-sm text-gray-600 leading-relaxed">一早的好天氣，我們決定出發尋找傳說中的繡球花。寶寶第一次看到這麼大片的花海，眼神裡充滿了好奇。</p></div><div class="w-3/5"><img src="https://placehold.co/400x300/A78BFA/FFFFFF?text=出發！" alt="出發的照片" class="rounded-lg shadow-md"></div></div><div><img src="https://placehold.co/600x400/FBCFE8/1F2937?text=美麗的繡球花" alt="繡球花特寫" class="w-full rounded-lg shadow-lg"><p class="text-center text-xs text-gray-500 mt-2">五彩繽紛的繡球花，真的像仙境一樣。</p></div>
                    <div class="mt-8">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">行程亮點</h3>
                        <div class="relative">
                            <div class="absolute left-5 top-2 bottom-2 w-0.5 bg-gray-200"></div>
                            <div class="relative flex items-start space-x-4 mb-6">
                                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center z-10"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div>
                                <div><p class="font-semibold text-gray-800">上午 10:30 - 竹子湖步道</p><p class="text-sm text-gray-600">在繡球花海中散步，享受芬多精。</p></div>
                            </div>
                            <div class="relative flex items-start space-x-4 mb-6">
                                <div class="flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center z-10"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0c-.454-.303-.977-.454-1.5-.454V5.546c.523 0 1.046-.151 1.5-.454a2.704 2.704 0 013 0 2.704 2.704 0 003 0 2.704 2.704 0 013 0 2.704 2.704 0 003 0c.454.303.977.454 1.5.454v10z"></path></svg></div>
                                <div><p class="font-semibold text-gray-800">中午 12:15 - 青菜園</p><p class="text-sm text-gray-600">品嚐美味的野菜午餐。</p></div>
                            </div>
                        </div>
                    </div>
                    <div class="py-4 border-t border-b border-gray-200 my-6 flex justify-between items-center">
                        <div class="flex items-center space-x-4 text-sm text-gray-500">
                            <span>👁️ 8.2k 次觀看</span>
                            <span>❤️ 1.2k 個喜歡</span>
                        </div>
                        <button class="like-button text-gray-400 hover:text-red-500 transition-colors">
                            <svg class="heart-icon-outline h-8 w-8" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z" /></svg>
                            <svg class="heart-icon-solid h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" /></svg>
                        </button>
                    </div>
                    <div class="pt-2 pb-4 text-center"><button class="bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transition-transform hover:scale-105">🖨️ 將這份回憶印成書</button></div></div></main>
                </div>
                <div id="share-modal-container" class="absolute inset-0 z-30"><div id="share-modal-backdrop" class="absolute inset-0 bg-black/40"></div><div id="share-modal-panel" class="absolute bottom-0 left-0 right-0 bg-slate-50 rounded-t-2xl p-5 shadow-2xl"><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold text-gray-900">分享這份回憶</h2><button id="close-modal-button" class="text-gray-400 hover:text-gray-700">&times;</button></div>
                <div class="mt-4">
                    <h3 class="text-base font-semibold text-gray-800 mb-3">分享給群組</h3>
                    <div class="space-y-2">
                        <button class="share-group-button w-full text-left bg-white p-3 rounded-lg border flex items-center"><span>👨‍👩‍👧‍👦</span><span class="ml-3">家人群組</span></button>
                        <button class="share-group-button w-full text-left bg-white p-3 rounded-lg border flex items-center"><span>🧑‍🤝‍🧑</span><span class="ml-3">朋友群組</span></button>
                        <button class="share-group-button w-full text-left bg-white p-3 rounded-lg border flex items-center"><span>🏕️</span><span class="ml-3">露營好夥伴</span></button>
                    </div>
                </div>
                <div class="bg-white p-3 rounded-lg border mt-4"><p class="text-xs text-gray-500 mb-2">或複製私密連結：</p><div class="flex items-center space-x-2"><input type="text" value="https://our-app.com/diary/xyz123" class="text-sm text-gray-600 bg-gray-100 p-2 rounded w-full truncate" readonly><button id="copy-link-button" class="bg-amber-500 text-white px-3 py-2 rounded-md text-sm font-semibold whitespace-nowrap">複製</button></div></div><div class="mt-6"><button id="done-button" class="w-full bg-gray-800 text-white font-bold py-3 rounded-lg hover:bg-gray-900">完成</button></div></div></div>
            </div>

            <!-- ================================================== -->
            <!-- =====           編輯日記頁 (Edit)              ===== -->
            <!-- ================================================== -->
            <div id="edit-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex justify-between items-center flex-shrink-0">
                    <button class="go-back-button text-gray-600 hover:text-gray-900">取消</button>
                    <h1 class="text-base font-bold text-gray-800">編輯日記</h1>
                    <button id="save-button" class="text-amber-500 font-bold">儲存</button>
                </header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-5">
                        <div class="relative mb-4">
                            <img src="https://placehold.co/600x450/6EE7B7/1F2937?text=花海中的笑聲" alt="陽明山繡球花海封面" class="w-full h-64 object-cover rounded-lg">
                        </div>
                        <div>
                            <label class="text-lg font-semibold text-gray-700">封面故事</label>
                            <textarea id="edit-intro-text" class="w-full mt-2 p-3 border border-gray-300 rounded-lg h-24 focus:ring-2 focus:ring-amber-400 focus:border-amber-400"></textarea>
                        </div>
                        <div class="mt-6">
                            <label class="text-lg font-semibold text-gray-700">日記內文</label>
                            <textarea id="edit-body-text" class="w-full mt-2 p-3 border border-gray-300 rounded-lg h-40 focus:ring-2 focus:ring-amber-400 focus:border-amber-400"></textarea>
                        </div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====           生成中... (Loading)            ===== -->
            <!-- ================================================== -->
            <div id="loading-screen" class="page">
                <div class="m-auto text-center p-8"><div class="bg-amber-400 p-8 rounded-2xl"><svg class="animate-spin h-12 w-12 text-white mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><h2 class="text-2xl font-bold mt-6 text-white">AI 正在為您撰寫故事...</h2><p class="mt-2 text-white/80">請稍候，美好的回憶即將呈現。</p></div></div>
            </div>
            
            <!-- ================================================== -->
            <!-- =====         設定頁 (Settings)                ===== -->
            <!-- ================================================== -->
            <div id="pro-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">設定</h1></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6">
                        <button id="go-to-profile-edit" class="w-full text-left bg-white p-4 rounded-lg border flex items-center mb-8">
                            <img class="w-12 h-12 rounded-full" src="https://placehold.co/100x100/fde68a/a16207?text=林" alt="User Avatar">
                            <div class="ml-4 flex-1">
                                <p class="font-bold">林媽媽</p>
                                <p class="text-xs text-gray-500">@lin_mama</p>
                            </div>
                            <span>&gt;</span>
                        </button>
                        <div class="mt-8 space-y-2">
                             <button id="go-to-earnings" class="w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><span>💰 創作者收益中心</span><span>&gt;</span></button>
                             <button id="go-to-groups" class="w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><span>👨‍👩‍👧‍👦 管理我的群組</span><span>&gt;</span></button>
                             <button id="go-to-writing-style" class="w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><span>✍️ AI 寫作風格</span><span>&gt;</span></button>
                             <button class="w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><span>🔔 通知設定</span><span>&gt;</span></button>
                             <button class="w-full text-left text-red-500 bg-white p-4 rounded-lg border">登出帳號</button>
                        </div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====       創作者收益頁 (Earnings)            ===== -->
            <!-- ================================================== -->
            <div id="earnings-screen" class="page">
                 <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">創作者收益</h1></header>
                 <div class="overflow-y-auto flex-1">
                     <main class="p-6">
                        <div class="bg-white p-5 rounded-xl shadow-lg text-center">
                            <p class="text-sm text-gray-500">目前總收益</p>
                            <p class="text-4xl font-bold text-gray-800 my-2">NT$ 850</p>
                            <button class="bg-green-500 text-white font-bold py-2 px-8 rounded-full">提領</button>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-6">
                            <div class="bg-white p-3 rounded-xl shadow"><p class="text-xs text-gray-500">今日預估收益</p><p class="font-bold text-lg">NT$ 15</p></div>
                            <div class="bg-white p-3 rounded-xl shadow"><p class="text-xs text-gray-500">本月累計</p><p class="font-bold text-lg">NT$ 320</p></div>
                        </div>
                        <div class="mt-8">
                            <h3 class="font-bold mb-2">收益趨勢 (近30日)</h3>
                            <div class="bg-white p-4 rounded-xl shadow">
                                <img src="https://placehold.co/600x200/f0f9ff/0284c7?text=收益趨勢圖" alt="收益趨勢圖" class="w-full">
                            </div>
                        </div>
                         <div class="mt-8">
                            <h3 class="font-bold mb-2">熱門日記排行榜</h3>
                            <div class="space-y-3">
                                <div class="bg-white p-3 rounded-xl shadow flex items-center space-x-3">
                                    <img src="https://placehold.co/100x100/34D399/FFFFFF?text=親子" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1"><p class="font-bold text-sm">陽明山繡球花之旅</p><p class="text-xs text-gray-500">觀看 8.2k次・收益 NT$ 125</p></div>
                                </div>
                                 <div class="bg-white p-3 rounded-xl shadow flex items-center space-x-3">
                                    <img src="https://placehold.co/100x100/fb923c/ffffff?text=露營" class="w-16 h-16 rounded-lg object-cover">
                                    <div class="flex-1"><p class="font-bold text-sm">我們的第一次森林露營</p><p class="text-xs text-gray-500">觀看 6.5k次・收益 NT$ 98</p></div>
                                </div>
                            </div>
                        </div>
                     </main>
                 </div>
            </div>
            
            <!-- ================================================== -->
            <!-- =====         管理群組頁 (Groups)              ===== -->
            <!-- ================================================== -->
            <div id="groups-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">管理我的群組</h1></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6">
                        <div class="space-y-3">
                            <button class="group-item w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><div><p>👨‍👩‍👧‍👦 家人群組</p><p class="text-xs text-gray-500">5 位成員</p></div><span>&gt;</span></button>
                            <button class="group-item w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><div><p>🧑‍🤝‍🧑 朋友群組</p><p class="text-xs text-gray-500">12 位成員</p></div><span>&gt;</span></button>
                            <button class="group-item w-full text-left bg-white p-4 rounded-lg border flex justify-between items-center"><div><p>🏕️ 露營好夥伴</p><p class="text-xs text-gray-500">8 位成員</p></div><span>&gt;</span></button>
                        </div>
                        <button id="create-group-button" class="mt-6 w-full bg-amber-500 text-white font-bold py-3 rounded-lg">建立新群組</button>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====       編輯群組頁 (Group Edit)            ===== -->
            <!-- ================================================== -->
            <div id="group-edit-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">編輯群組</h1><button class="text-amber-500 font-bold w-12">儲存</button></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6">
                        <div>
                            <label class="text-lg font-semibold text-gray-700">群組名稱</label>
                            <input type="text" value="家人群組" class="w-full mt-2 p-3 border border-gray-300 rounded-lg">
                        </div>
                        <div class="mt-6">
                             <h3 class="text-lg font-semibold text-gray-700 mb-2">成員 (5)</h3>
                             <div class="space-y-2">
                                <div class="bg-white p-3 rounded-lg border flex justify-between items-center">
                                    <div class="flex items-center"><img src="https://placehold.co/100x100/fde68a/a16207?text=嬤" class="w-10 h-10 rounded-full mr-3"><span>阿嬤</span></div>
                                    <button class="text-red-500">移除</button>
                                </div>
                                <div class="bg-white p-3 rounded-lg border flex justify-between items-center">
                                    <div class="flex items-center"><img src="https://placehold.co/100x100/dbeafe/1e3a8a?text=爸" class="w-10 h-10 rounded-full mr-3"><span>爸爸</span></div>
                                    <button class="text-red-500">移除</button>
                                </div>
                             </div>
                        </div>
                        <button id="add-member-button" class="mt-6 w-full bg-blue-500 text-white font-bold py-3 rounded-lg">＋ 新增成員</button>
                        <button class="mt-8 w-full text-red-500 font-semibold py-2">刪除群組</button>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====     建立新群組頁 (Group Create)          ===== -->
            <!-- ================================================== -->
            <div id="group-create-screen" class="page">
                 <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">建立新群組</h1><button class="text-amber-500 font-bold w-12">建立</button></header>
                 <div class="overflow-y-auto flex-1">
                     <main class="p-6">
                        <div class="flex flex-col items-center">
                            <button id="emoji-picker-button" class="text-6xl bg-white rounded-full h-24 w-24 flex items-center justify-center shadow-md mb-4">🍽️</button>
                            <input type="text" placeholder="請輸入群組名稱" class="w-full text-center text-xl font-bold p-2 border-b-2 focus:outline-none focus:border-amber-500">
                        </div>
                        <div class="mt-8">
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">新增成員</h3>
                            <div class="relative"><input type="text" placeholder="搜尋使用者名稱..." class="w-full bg-white border border-gray-200 rounded-full py-2 pl-10 pr-4"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div>
                        </div>
                     </main>
                 </div>
            </div>

             <!-- ================================================== -->
            <!-- =====       編輯個人資料頁 (Profile Edit)      ===== -->
            <!-- ================================================== -->
            <div id="profile-edit-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">編輯個人資料</h1><button class="text-amber-500 font-bold w-12">儲存</button></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6">
                        <div class="flex flex-col items-center">
                            <div class="relative">
                                <img class="w-24 h-24 rounded-full" src="https://placehold.co/100x100/fde68a/a16207?text=林" alt="User Avatar">
                                <button class="absolute -bottom-1 -right-1 bg-white rounded-full p-1 border shadow"><svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button>
                            </div>
                        </div>
                        <div class="mt-8 space-y-4">
                            <div><label class="text-sm font-semibold text-gray-600">使用者名稱</label><input type="text" value="@lin_mama" class="w-full mt-1 p-2 border border-gray-300 rounded-lg bg-gray-100" readonly></div>
                            <div><label class="text-sm font-semibold text-gray-600">顯示名稱</label><input type="text" value="林媽媽" class="w-full mt-1 p-2 border border-gray-300 rounded-lg"></div>
                            <div><label class="text-sm font-semibold text-gray-600">個人簡介</label><textarea class="w-full mt-1 p-2 border border-gray-300 rounded-lg h-24">熱愛用照片記錄家庭生活的點點滴滴。</textarea></div>
                            <div><label class="text-sm font-semibold text-gray-600">電子郵件</label><input type="email" value="lin.mama@email.com" class="w-full mt-1 p-2 border border-gray-300 rounded-lg"></div>
                            <button class="w-full text-blue-600 text-left pt-2">更改密碼</button>
                        </div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====        AI 寫作風格頁 (Writing Style)       ===== -->
            <!-- ================================================== -->
            <div id="writing-style-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex items-center flex-shrink-0"><button class="go-back-button text-gray-600 hover:text-gray-900"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg></button><h1 class="text-base font-bold text-gray-800 mx-auto">AI 寫作風格</h1></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6">
                        <div class="space-y-3">
                            <label class="flex items-start p-4 bg-white border-2 border-amber-400 rounded-lg"><input type="radio" name="writing-style-option" class="mt-1 text-amber-500 focus:ring-amber-400" checked><div class="ml-3"><p class="font-semibold">溫馨感性風</p><p class="text-sm text-gray-500">充滿溫度與情感，適合記錄家庭的溫暖瞬間。</p></div></label>
                            <label class="flex items-start p-4 bg-white border rounded-lg"><input type="radio" name="writing-style-option" class="mt-1 text-amber-500 focus:ring-amber-400"><div class="ml-3"><p class="font-semibold">活潑有趣風</p><p class="text-sm text-gray-500">用字俏皮，多用驚嘆號，適合記錄歡樂的出遊。</p></div></label>
                            <label class="flex items-start p-4 bg-white border rounded-lg"><input type="radio" name="writing-style-option" class="mt-1 text-amber-500 focus:ring-amber-400"><div class="ml-3"><p class="font-semibold">簡潔紀錄風</p><p class="text-sm text-gray-500">像旅遊雜誌般，客觀記錄時間、地點與事件。</p></div></label>
                             <label class="flex items-start p-4 bg-white border rounded-lg">
                                <input type="radio" name="writing-style-option" value="custom" class="mt-1 text-amber-500 focus:ring-amber-400">
                                <div class="ml-3 flex-1">
                                    <p class="font-semibold">✍️ 自訂風格</p>
                                    <textarea id="custom-prompt-style" class="w-full mt-2 p-2 border rounded text-sm bg-gray-50" rows="3" placeholder="請輸入您希望的寫作風格提示詞，例如：請用古龍的武俠小說風格來寫..." disabled></textarea>
                                </div>
                            </label>
                        </div>
                    </main>
                </div>
            </div>

            <!-- ================================================== -->
            <!-- =====     互動式提問頁 (Interactive Question)    ===== -->
            <!-- ================================================== -->
            <div id="interactive-question-screen" class="page">
                <header class="p-4 pt-8 bg-white/80 backdrop-blur-sm z-10 border-b border-gray-200 flex justify-end items-center flex-shrink-0"><button id="skip-question-button" class="text-gray-500 hover:text-gray-800">跳過</button></header>
                <div class="overflow-y-auto flex-1">
                    <main class="p-6 text-center flex flex-col justify-center h-full">
                        <div class="flex-grow">
                            <p class="text-lg text-gray-600 mb-4">AI 偵探發現...</p>
                            <div class="flex -space-x-4 justify-center mb-6">
                                <img class="w-16 h-16 rounded-full border-2 border-white object-cover" src="https://placehold.co/100x100/34D399/FFFFFF?text=1">
                                <img class="w-16 h-16 rounded-full border-2 border-white object-cover" src="https://placehold.co/100x100/A78BFA/FFFFFF?text=2">
                                <img class="w-16 h-16 rounded-full border-2 border-white object-cover" src="https://placehold.co/100x100/FBCFE8/FFFFFF?text=3">
                            </div>
                            <p class="text-xl font-semibold text-gray-800">你們在花海中笑得好開心！</p>
                            <p class="text-xl font-semibold text-gray-800 mt-1">那天最難忘的瞬間是什麼呢？</p>
                            <textarea class="w-full mt-6 p-3 border border-gray-300 rounded-lg h-28" placeholder="告訴 AI 更多細節，讓故事更精彩..."></textarea>
                        </div>
                        <button id="continue-generation-button" class="w-full bg-amber-500 text-white font-bold py-3 rounded-lg mt-6">繼續生成</button>
                    </main>
                </div>
            </div>


            <!-- ===== 底部導覽列 ===== -->
            <nav id="bottom-nav" class="absolute bottom-0 left-0 right-0 h-20 bg-white/90 backdrop-blur-sm border-t border-gray-200 flex justify-around items-center z-20">
                <button data-target="home-screen" class="bottom-nav-item text-center text-gray-500 active"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg><p class="text-xs mt-1">首頁</p></button>
                <button id="fab-nav" class="bg-amber-500 hover:bg-amber-600 text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center transform -mt-8"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg></button>
                <button data-target="explore-screen" class="bottom-nav-item text-center text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 3l6-3" /></svg><p class="text-xs mt-1">探索</p></button>
            </nav>
            
            <!-- ===== 新增成員彈窗 ===== -->
            <div id="add-member-modal-container" class="absolute inset-0 z-40"><div id="add-member-modal-backdrop" class="absolute inset-0 bg-black/40"></div><div id="add-member-modal-panel" class="absolute bottom-0 left-0 right-0 bg-slate-50 rounded-t-2xl p-5 shadow-2xl"><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-bold text-gray-900">新增成員</h2><button id="close-add-member-modal-button" class="text-gray-400 hover:text-gray-700 text-2xl">&times;</button></div><div class="relative"><input type="text" placeholder="搜尋使用者名稱..." class="w-full bg-white border border-gray-200 rounded-full py-2 pl-10 pr-4"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div></div><div class="mt-4 space-y-2"><div class="bg-white p-3 rounded-lg border flex justify-between items-center"><div class="flex items-center"><img src="https://placehold.co/100x100/dbeafe/1e3a8a?text=爸" class="w-10 h-10 rounded-full mr-3"><div><p class="font-semibold">攝影老爸</p><p class="text-xs text-gray-500">@photodad</p></div></div><button class="invite-button bg-blue-500 text-white text-sm font-semibold px-3 py-1 rounded-full">邀請</button></div><div class="bg-white p-3 rounded-lg border flex justify-between items-center"><div class="flex items-center"><img src="https://placehold.co/100x100/fce7f3/831843?text=娃" class="w-10 h-10 rounded-full mr-3"><div><p class="font-semibold">娃娃看天下</p><p class="text-xs text-gray-500">@wawaworld</p></div></div><button class="bg-gray-200 text-gray-500 text-sm font-semibold px-3 py-1 rounded-full cursor-not-allowed">已邀請</button></div></div>
                <div class="mt-6 text-center">
                    <p class="text-sm text-gray-500 mb-2">或</p>
                    <button id="generate-invite-link" class="w-full bg-green-500 text-white font-bold py-3 rounded-lg">產生邀請連結</button>
                    <div id="invite-link-details" class="hidden mt-4 bg-white p-4 rounded-lg text-left">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://our-app.com/join/abcde" class="mx-auto my-2">
                        <div class="flex items-center space-x-2 mt-2"><input type="text" value="https://our-app.com/join/abcde" class="text-sm text-gray-600 bg-gray-100 p-2 rounded w-full truncate" readonly><button id="copy-invite-link-button" class="bg-amber-500 text-white px-3 py-2 rounded-md text-sm font-semibold whitespace-nowrap">複製</button></div>
                        <div class="mt-4 space-y-2 text-sm">
                            <div class="flex justify-between items-center"><label for="expire-select">有效期</label><select id="expire-select" class="border rounded p-1"><option>1 天</option><option>7 天</option><option>永久</option></select></div>
                            <div class="flex justify-between items-center"><label for="limit-select">使用次數</label><select id="limit-select" class="border rounded p-1"><option>5 次</option><option>10 次</option><option>無限制</option></select></div>
                        </div>
                    </div>
                </div>
            </div></div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pages = document.querySelectorAll('.page');
            const navItems = document.querySelectorAll('.bottom-nav-item');
            const bottomNav = document.getElementById('bottom-nav');
            let navigationStack = ['home-screen'];

            function showPage(targetId, isSubPage = false) {
                pages.forEach(page => {
                    page.classList.toggle('is-active', page.id === targetId);
                });
                bottomNav.style.display = isSubPage ? 'none' : 'flex';
            }
            
            function navigateTo(targetId) {
                const isSubPage = !['home-screen', 'explore-screen'].includes(targetId);
                showPage(targetId, isSubPage);
                if (navigationStack[navigationStack.length - 1] !== targetId) {
                    navigationStack.push(targetId);
                }
            }

            function goBack() {
                if (navigationStack.length > 1) {
                    navigationStack.pop();
                    const targetId = navigationStack[navigationStack.length - 1];
                    const isSubPage = !['home-screen', 'explore-screen'].includes(targetId);
                    showPage(targetId, isSubPage);
                    navItems.forEach(nav => {
                        nav.classList.toggle('active', nav.dataset.target === targetId);
                    });
                }
            }
            
            // --- Event Listeners ---
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetId = item.dataset.target;
                    navigationStack = [targetId];
                    navigateTo(targetId);
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                });
            });

            document.getElementById('fab-nav').addEventListener('click', () => navigateTo('create-screen'));
            document.querySelectorAll('.memory-card, #explore-screen .masonry-item, #profile-screen .masonry-item, .featured-carousel > div').forEach(card => card.addEventListener('click', () => navigateTo('detail-screen')));
            document.querySelectorAll('#explore-screen .creator-card').forEach(card => card.addEventListener('click', () => navigateTo('profile-screen')));
            document.getElementById('settings-button').addEventListener('click', () => navigateTo('pro-screen'));
            document.querySelectorAll('.go-back-button').forEach(button => button.addEventListener('click', goBack));
            
            // --- Settings/Pro Page ---
            document.getElementById('go-to-earnings').addEventListener('click', () => navigateTo('earnings-screen'));
            document.getElementById('go-to-groups').addEventListener('click', () => navigateTo('groups-screen'));
            document.querySelectorAll('#groups-screen .group-item').forEach(item => item.addEventListener('click', () => navigateTo('group-edit-screen')));
            document.getElementById('create-group-button').addEventListener('click', () => navigateTo('group-create-screen'));
            document.getElementById('go-to-profile-edit').addEventListener('click', () => navigateTo('profile-edit-screen'));
            document.getElementById('go-to-writing-style').addEventListener('click', () => navigateTo('writing-style-screen'));


            // --- Create Diary Page ---
            const titleInput = document.getElementById('diary-title');
            const generateButton = document.getElementById('generate-button');
            const photoUpload = document.getElementById('photo-upload');
            const photoCarouselContainer = document.getElementById('photo-carousel-container');
            const photoCountSpan = document.getElementById('photo-count');


            if(photoUpload) {
                photoUpload.addEventListener('change', (event) => {
                    const files = event.target.files;
                    if (files.length > 0) {
                        photoCarouselContainer.innerHTML = ''; // Clear placeholder
                    }
                    for (const file of files) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const img = document.createElement('img');
                            img.src = e.target.result;
                            img.className = "rounded-lg h-40 object-cover flex-shrink-0";
                            photoCarouselContainer.appendChild(img);
                        }
                        reader.readAsDataURL(file);
                    }
                    photoCountSpan.textContent = `已選取的照片 (${files.length})`;
                });
            }

            if(titleInput) {
                titleInput.addEventListener('input', () => {
                    const hasText = titleInput.value.trim().length > 0;
                    generateButton.disabled = !hasText;
                });
            }

            if(generateButton) {
                generateButton.addEventListener('click', () => {
                    if (!generateButton.disabled) {
                        navigateTo('interactive-question-screen');
                    }
                });
            }
            
            // --- Interactive Question Page ---
            const skipQuestionButton = document.getElementById('skip-question-button');
            const continueGenerationButton = document.getElementById('continue-generation-button');
            
            function proceedToGeneration() {
                document.getElementById('detail-title').textContent = titleInput.value;
                navigateTo('loading-screen');
                setTimeout(() => {
                    navigationStack.pop(); // remove question page
                    navigationStack.pop(); // remove create page
                    navigateTo('detail-screen');
                }, 2500);
            }

            if(skipQuestionButton) skipQuestionButton.addEventListener('click', proceedToGeneration);
            if(continueGenerationButton) continueGenerationButton.addEventListener('click', proceedToGeneration);


            // --- Detail Page ---
            const editButton = document.getElementById('edit-button');
            if(editButton) {
                editButton.addEventListener('click', () => {
                    document.getElementById('edit-intro-text').value = document.getElementById('detail-intro-text').textContent;
                    document.getElementById('edit-body-text').value = document.getElementById('detail-body-text').textContent;
                    navigateTo('edit-screen');
                });
            }
            document.querySelectorAll('.like-button').forEach(button => {
                button.addEventListener('click', () => {
                    button.classList.toggle('liked');
                })
            });

            // --- Edit Page ---
            const saveButton = document.getElementById('save-button');
            if(saveButton) {
                saveButton.addEventListener('click', () => {
                    document.getElementById('detail-intro-text').textContent = document.getElementById('edit-intro-text').value;
                    document.getElementById('detail-body-text').textContent = document.getElementById('edit-body-text').value;
                    goBack();
                });
            }

            // --- Share Modal Logic ---
            const shareButton = document.getElementById('share-button');
            const modalContainer = document.getElementById('share-modal-container');
            if (shareButton) {
                shareButton.addEventListener('click', () => modalContainer.classList.add('visible'));
                document.getElementById('close-modal-button').addEventListener('click', () => modalContainer.classList.remove('visible'));
                document.getElementById('done-button').addEventListener('click', () => modalContainer.classList.remove('visible'));
                document.getElementById('share-modal-backdrop').addEventListener('click', () => modalContainer.classList.remove('visible'));
                
                document.querySelectorAll('.share-group-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const groupName = button.querySelector('span:last-child').textContent;
                        alert(`日記已分享給 ${groupName}！`);
                        modalContainer.classList.remove('visible');
                    });
                });

                const copyButton = document.getElementById('copy-link-button');
                copyButton.addEventListener('click', () => {
                    const linkInput = copyButton.previousElementSibling;
                    navigator.clipboard.writeText(linkInput.value).then(() => {
                        copyButton.textContent = '已複製!';
                        copyButton.classList.remove('bg-amber-500');
                        copyButton.classList.add('bg-green-500');
                        setTimeout(() => { copyButton.textContent = '複製'; copyButton.classList.remove('bg-green-500'); copyButton.classList.add('bg-amber-500'); }, 2000);
                    });
                });
            }
            
            // --- Add Member Modal Logic ---
            const addMemberButton = document.getElementById('add-member-button');
            const addMemberModalContainer = document.getElementById('add-member-modal-container');
            const inviteLinkDetails = document.getElementById('invite-link-details');

            if (addMemberButton) {
                addMemberButton.addEventListener('click', () => {
                    inviteLinkDetails.classList.add('hidden'); // Reset state
                    addMemberModalContainer.classList.add('visible');
                });
            }

            const closeAddMemberModalButton = document.getElementById('close-add-member-modal-button');
            const addMemberModalBackdrop = document.getElementById('add-member-modal-backdrop');

            function closeAddMemberModal() {
                if(addMemberModalContainer) addMemberModalContainer.classList.remove('visible');
            }

            if(closeAddMemberModalButton) closeAddMemberModalButton.addEventListener('click', closeAddMemberModal);
            if(addMemberModalBackdrop) addMemberModalBackdrop.addEventListener('click', closeAddMemberModal);

            document.querySelectorAll('.invite-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.target.textContent = '已邀請';
                    e.target.disabled = true;
                    e.target.classList.remove('bg-blue-500');
                    e.target.classList.add('bg-gray-200', 'text-gray-500', 'cursor-not-allowed');
                    alert('已送出邀請！');
                });
            });
            
            const generateInviteLinkButton = document.getElementById('generate-invite-link');
            if(generateInviteLinkButton) {
                generateInviteLinkButton.addEventListener('click', () => {
                    inviteLinkDetails.classList.toggle('hidden');
                });
            }
            
            const copyInviteLinkButton = document.getElementById('copy-invite-link-button');
            if(copyInviteLinkButton) {
                 copyInviteLinkButton.addEventListener('click', () => {
                    const linkInput = copyInviteLinkButton.previousElementSibling;
                    navigator.clipboard.writeText(linkInput.value).then(() => {
                        alert('邀請連結已複製！');
                    });
                });
            }

            // --- Emoji Picker Logic ---
            const emojiPickerButton = document.getElementById('emoji-picker-button');
            if (emojiPickerButton) {
                const emojis = ['🍽️', '🏕️', '🎂', '🏖️', '✈️', '🎉', '🏠'];
                let currentIndex = 0;
                emojiPickerButton.addEventListener('click', () => {
                    currentIndex = (currentIndex + 1) % emojis.length;
                    emojiPickerButton.textContent = emojis[currentIndex];
                });
            }

            // --- Writing Style Logic ---
            const customPromptTextarea = document.getElementById('custom-prompt-style');
            if(customPromptTextarea) {
                document.querySelectorAll('input[name="writing-style-option"]').forEach(radio => {
                    radio.addEventListener('change', (event) => {
                        if (event.target.value === 'custom') {
                            customPromptTextarea.disabled = false;
                            customPromptTextarea.classList.remove('bg-gray-50');
                        } else {
                            customPromptTextarea.disabled = true;
                            customPromptTextarea.classList.add('bg-gray-50');
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
